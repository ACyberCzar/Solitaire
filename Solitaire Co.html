<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Accessible Simple Solitaire</title>
    <style>
        body {
            background: #222;
            color: #fff;
            font-family: Arial, sans-serif;
            font-size: 1.2em;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 1em;
        }
        .controls {
            margin-bottom: 1em;
        }
        .cards {
            display: flex;
            gap: 1em;
            flex-wrap: wrap;
        }
        .pile {
            background: #444;
            border-radius: 8px;
            padding: 1em;
            min-width: 120px;
            min-height: 180px;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 1em;
        }
        .card {
            background: #fff;
            color: #222;
            border-radius: 6px;
            width: 80px;
            height: 120px;
            margin: 0.2em 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            cursor: pointer;
            outline: 2px solid transparent;
            transition: outline 0.2s;
        }
        .card.selected, .card:focus {
            outline: 2px solid #00ffea;
            background: #e0ffe0;
        }
        .high-contrast .card {
            background: #000;
            color: #fff;
            border: 2px solid #fff;
        }
        .high-contrast body {
            background: #000;
            color: #fff;
        }
        .sr-only {
            position: absolute;
            left: -9999px;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div class="container" id="main-container">
        <h1 tabindex="0">Simple Solitaire (Accessible)</h1>
        <div class="controls">
            <button id="restartBtn">Restart Game</button>
            <button id="contrastBtn">Toggle High Contrast</button>
            <label>
                <input type="checkbox" id="fontSizeToggle">
                Large Font
            </label>
        </div>
        <div class="cards" id="gameArea" aria-label="Solitaire Game Area" role="region"></div>
        <div id="status" aria-live="polite"></div>
    </div>
    <script>
        // Simple Solitaire: Move all cards to the foundation pile in order
        const suits = ['♠', '♥', '♦', '♣'];
        const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        let piles = [];
        let foundation = [];
        let selected = null;

        function shuffle(deck) {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            return deck;
        }

        function createDeck() {
            let deck = [];
            for (let suit of suits) {
                for (let value of values) {
                    deck.push({ suit, value });
                }
            }
            return shuffle(deck);
        }

        function startGame() {
            const deck = createDeck();
            piles = [[], [], [], [], [], [], []];
            foundation = [];
            for (let i = 0; i < 7; i++) {
                for (let j = 0; j <= i; j++) {
                    piles[i].push(deck.pop());
                }
            }
            // Remaining cards as draw pile
            piles.push(deck);
            selected = null;
            render();
            announce('Game started. Use Tab to navigate cards, Enter or Space to select and move.');
        }

        function render() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            piles.forEach((pile, i) => {
                const pileDiv = document.createElement('div');
                pileDiv.className = 'pile';
                pileDiv.setAttribute('aria-label', `Pile ${i + 1}`);
                pileDiv.setAttribute('tabindex', '-1');
                pile.forEach((card, j) => {
                    const cardDiv = document.createElement('div');
                    cardDiv.className = 'card';
                    cardDiv.setAttribute('tabindex', '0');
                    cardDiv.setAttribute('role', 'button');
                    cardDiv.setAttribute('aria-label', `${card.value} of ${card.suit}`);
                    cardDiv.innerText = `${card.value}${card.suit}`;
                    if (selected && selected.pile === i && selected.index === j) {
                        cardDiv.classList.add('selected');
                    }
                    cardDiv.addEventListener('click', () => selectCard(i, j));
                    cardDiv.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            selectCard(i, j);
                            e.preventDefault();
                        }
                    });
                    pileDiv.appendChild(cardDiv);
                });
                gameArea.appendChild(pileDiv);
            });
            // Foundation pile
            const foundationDiv = document.createElement('div');
            foundationDiv.className = 'pile';
            foundationDiv.setAttribute('aria-label', 'Foundation');
            foundationDiv.innerHTML = '<strong>Foundation</strong>';
            foundation.forEach(card => {
                const cardDiv = document.createElement('div');
                cardDiv.className = 'card';
                cardDiv.innerText = `${card.value}${card.suit}`;
                cardDiv.setAttribute('aria-label', `${card.value} of ${card.suit}`);
                foundationDiv.appendChild(cardDiv);
            });
            gameArea.appendChild(foundationDiv);
        }

        function selectCard(pileIndex, cardIndex) {
            if (selected) {
                // Try to move selected card to foundation
                const card = piles[selected.pile][selected.index];
                if (canMoveToFoundation(card)) {
                    foundation.push(card);
                    piles[selected.pile].splice(selected.index, 1);
                    selected = null;
                    render();
                    announce(`${card.value} of ${card.suit} moved to foundation.`);
                    checkWin();
                } else {
                    announce('Invalid move.');
                    selected = null;
                    render();
                }
            } else {
                selected = { pile: pileIndex, index: cardIndex };
                render();
                announce(`Selected ${piles[pileIndex][cardIndex].value} of ${piles[pileIndex][cardIndex].suit}`);
            }
        }

        function canMoveToFoundation(card) {
            if (foundation.length === 0) {
                return card.value === 'A';
            }
            const last = foundation[foundation.length - 1];
            return card.suit === last.suit &&
                values.indexOf(card.value) === values.indexOf(last.value) + 1;
        }

        function announce(msg) {
            document.getElementById('status').innerText = msg;
        }

        // Accessibility controls
        document.getElementById('contrastBtn').onclick = () => {
            document.body.classList.toggle('high-contrast');
            announce('High contrast mode toggled.');
        };
        document.getElementById('fontSizeToggle').onchange = (e) => {
            document.body.style.fontSize = e.target.checked ? '1.7em' : '1.2em';
            announce('Font size changed.');
        };
        document.getElementById('restartBtn').onclick = startGame;

        function checkWin() {
            if (foundation.length === 52) {
                announce('Congratulations! You won!');
            }
        }

        // Keyboard navigation: focus first card on load
        window.onload = () => {
            startGame();
            setTimeout(() => {
                const firstCard = document.querySelector('.card');
                if (firstCard) firstCard.focus();
            }, 200);
        };
    </script>
</body>
</html>